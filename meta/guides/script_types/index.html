

<!DOCTYPE html>
<html lang="ru" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.111.3">
    <meta name="description" content="">


    <title>Типы и атрибуты скриптов :: META | Devision Developers</title>
    <link rel="shortcut icon" href="https://rwstatic.ru/h/meta/favicon.ico" type="image/x-icon" />
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800&amp;subset=cyrillic-ext" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.blue_grey-pink.min.css" />

      <link href="https://developers.devision.io/meta/css/hybrid.css" rel="stylesheet">
    <link href="https://developers.devision.io/meta/css/horsey.css" rel="stylesheet">
    <link href="https://developers.devision.io/meta/css/theme.css" rel="stylesheet">
    <link href="https://developers.devision.io/meta/css/dev-theme.css" rel="stylesheet">

    <script src="https://code.jquery.com/jquery-3.2.1.min.js"  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>

    
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T3H3XF7');</script>

  </head>
  <body class="" data-url="https://developers.devision.io/meta/guides/script_types/">
    
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T3H3XF7"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


    


<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
    <header class="mdl-layout__header">
        <div class="mdl-layout__header-row">
            
            <span class="mdl-layout-title">
                <a href='https://developers.devision.io/meta/' class="header-logo-link">
                    <img src="https://metastatic.devision.io/avatar.png" width="30" />
                    META
                </a>
            </span>

            <div class="devsite-header-upper-tabs"></div>

            <div class="devsite-search-form">
                <div class="searchbox">
                        <input class="devsite-search-field" type="text" data-search-input
                               placeholder="Поиск"
                               id="search-by">

                        <div class="devsite-search-image material-icons" aria-hidden="true">search</div>
                        <script type="text/javascript" src="https://developers.devision.io/meta/js/lunr.min.js"></script>
                        <script type="text/javascript" src="https://developers.devision.io/meta/js/auto-complete.js"></script>
                        <link href="https://developers.devision.io/meta/css/auto-complete.css" rel="stylesheet">
                        <script type="text/javascript">
                            
                            var baseurl = "https:\/\/developers.devision.io\/meta";
                            
                        </script>
                        <script type="text/javascript" src="https://developers.devision.io/meta/js/search.js"></script>
                </div>
            </div>
        </div>
    </header>

    <main class="mdl-layout__content">
        <div class="page-content">
            <div class="mdl-grid devsite-full-site-width">

                <div class="devsite-nav mdl-cell mdl-cell--3-col mdl-cell--3-col-tablet mdl-cell--12-col-phone">
                    <nav class="devsite-section-nav">
                        <ul class="devsite-section-nav-main">
                            
                              
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/guides/" class="devsite-nav-item devsite-nav-item-main
                        parent
                        
                        parent
                        ">
                <a href="https://developers.devision.io/meta/guides/" class="devsite-nav-title devsite-nav-item-main-title">
                    <span>Руководства</span>

                    
                    

                    
                    
                    

                    
                </a>
                
                <ul class="devsite-nav-expandable">
                    
                    
                    


                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/guides/request_life_cycle/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/guides/request_life_cycle/" class="devsite-nav-title">
                    <span>Жизненный цикл запроса</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/guides/roles/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/guides/roles/" class="devsite-nav-title">
                    <span>Роли пользователей</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/guides/script_types/" class="devsite-nav-item dd-item active">
                <a href="https://developers.devision.io/meta/guides/script_types/" class="devsite-nav-title">
                    <span>Типы и атрибуты скриптов</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/guides/validation/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/guides/validation/" class="devsite-nav-title">
                    <span>Валидация</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/guides/entity_listeners/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/guides/entity_listeners/" class="devsite-nav-title">
                    <span>Отслеживание изменений сущностей</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/guides/entity_handlers/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/guides/entity_handlers/" class="devsite-nav-title">
                    <span>Обработчики событий сущностей</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/guides/data_types/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/guides/data_types/" class="devsite-nav-title">
                    <span>Типы данных</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/guides/template_engines/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/guides/template_engines/" class="devsite-nav-title">
                    <span>Шаблонизация</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/guides/charts/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/guides/charts/" class="devsite-nav-title">
                    <span>Графики</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/guides/cache/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/guides/cache/" class="devsite-nav-title">
                    <span>Кеширование</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/guides/debug_and_logging/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/guides/debug_and_logging/" class="devsite-nav-title">
                    <span>Отладка и Логирование</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/guides/build_url/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/guides/build_url/" class="devsite-nav-title">
                    <span>Ссылки: Построение URL</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/guides/testing/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/guides/testing/" class="devsite-nav-title">
                    <span>Тестирование</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/guides/i18n/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/guides/i18n/" class="devsite-nav-title">
                    <span>Интернационализация (i18n)</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/guides/db_naming/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/guides/db_naming/" class="devsite-nav-title">
                    <span>Именование сущностей в БД</span>
                </a>
            </li>
            
            
            
            
                    
                    
                </ul>
                
            </li>
            
            
            
                            
                              
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/samples/" class="devsite-nav-item devsite-nav-item-main
                        
                        
                        parent
                        ">
                <a href="https://developers.devision.io/meta/samples/" class="devsite-nav-title devsite-nav-item-main-title">
                    <span>Примеры</span>

                    
                    

                    
                    
                    

                    
                </a>
                
                <ul class="devsite-nav-expandable">
                    
                    
                    


                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/samples/pages/report_with_filters/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/samples/pages/report_with_filters/" class="devsite-nav-title">
                    <span>Простейший отчет с фильтрами</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/samples/pages/simple_entity/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/samples/pages/simple_entity/" class="devsite-nav-title">
                    <span>Список и редактирование сущности</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/samples/pages/open_modal/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/samples/pages/open_modal/" class="devsite-nav-title">
                    <span>Открытие модального окна</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/samples/pages/breadcrumbs/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/samples/pages/breadcrumbs/" class="devsite-nav-title">
                    <span>Управление выводом `хлебных крошек`</span>
                </a>
            </li>
            
            
            
            
                    
                    
                </ul>
                
            </li>
            
            
            
                            
                              
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/compoments/" class="devsite-nav-item devsite-nav-item-main
                        
                        
                        parent
                        ">
                <a href="https://developers.devision.io/meta/compoments/" class="devsite-nav-title devsite-nav-item-main-title">
                    <span>Компоненты</span>

                    
                    

                    
                    
                    

                    
                </a>
                
                <ul class="devsite-nav-expandable">
                    
                    
                    


                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/compoments/oauth/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/compoments/oauth/" class="devsite-nav-title">
                    <span>OAuth</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/compoments/event_bus/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/compoments/event_bus/" class="devsite-nav-title">
                    <span>Шина событий</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/compoments/media/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/compoments/media/" class="devsite-nav-title">
                    <span>Медиаданные</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/compoments/ticket/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/compoments/ticket/" class="devsite-nav-title">
                    <span>Тикеты</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/compoments/smart_forms/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/compoments/smart_forms/" class="devsite-nav-title">
                    <span>Смарт-формы</span>
                </a>
            </li>
            
            
            
            
                    
                    
                </ul>
                
            </li>
            
            
            
                            
                              
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/work_with_data/" class="devsite-nav-item devsite-nav-item-main
                        
                        
                        
                        ">
                <a href="https://developers.devision.io/meta/work_with_data/" class="devsite-nav-title devsite-nav-item-main-title">
                    <span>Работа с данными</span>

                    
                    

                    
                    
                    

                    
                </a>
                
                <ul class="devsite-nav-expandable">
                    
                    
                    


                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/work_with_data/datadiff/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/work_with_data/datadiff/" class="devsite-nav-title">
                    <span>DataDiffService</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/work_with_data/datatransform/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/work_with_data/datatransform/" class="devsite-nav-title">
                    <span>DataTransformService</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/work_with_data/google_sheets/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/work_with_data/google_sheets/" class="devsite-nav-title">
                    <span>Google Sheets</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/work_with_data/metaql/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/work_with_data/metaql/" class="devsite-nav-title">
                    <span>Язык запросов META (METAQL)</span>
                </a>
            </li>
            
            
            
            
                    
                    
                </ul>
                
            </li>
            
            
            
                            
                              
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/integrations/" class="devsite-nav-item devsite-nav-item-main
                        
                        
                        parent
                        ">
                <a href="https://developers.devision.io/meta/integrations/" class="devsite-nav-title devsite-nav-item-main-title">
                    <span>Интеграции</span>

                    
                    

                    
                    
                    

                    
                </a>
                
                <ul class="devsite-nav-expandable">
                    
                    
                    


                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/integrations/billing/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/integrations/billing/" class="devsite-nav-title">
                    <span>Billing</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/integrations/api_client/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/integrations/api_client/" class="devsite-nav-title">
                    <span>ApiClientService</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/integrations/google_analytics/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/integrations/google_analytics/" class="devsite-nav-title">
                    <span>Google Analytics</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/integrations/login_with_meta/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/integrations/login_with_meta/" class="devsite-nav-title">
                    <span>Вход через META</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/integrations/embedded_frames/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/integrations/embedded_frames/" class="devsite-nav-title">
                    <span>Embedded Frames</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/integrations/nginx/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/integrations/nginx/" class="devsite-nav-title">
                    <span>Nginx Proxy Headers</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/integrations/sdk/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/integrations/sdk/" class="devsite-nav-title">
                    <span>SDK</span>
                </a>
            </li>
            
            
            
            
                    
                    
                </ul>
                
            </li>
            
            
            
                            
                              
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/configs/" class="devsite-nav-item devsite-nav-item-main
                        
                        
                        parent
                        ">
                <a href="https://developers.devision.io/meta/configs/" class="devsite-nav-title devsite-nav-item-main-title">
                    <span>Конфигурация</span>

                    
                    

                    
                    
                    

                    
                </a>
                
                <ul class="devsite-nav-expandable">
                    
                    
                    


                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/configs/capp/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/configs/capp/" class="devsite-nav-title">
                    <span>App</span>
                </a>
            </li>
            
            
            
            
                    
                    
                </ul>
                
            </li>
            
            
            
                            
                              
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/" class="devsite-nav-item devsite-nav-item-main
                        
                        
                        parent
                        ">
                <a href="https://developers.devision.io/meta/reference/" class="devsite-nav-title devsite-nav-item-main-title">
                    <span>Справочник по API</span>

                    
                    

                    
                    
                    

                    
                </a>
                
                <ul class="devsite-nav-expandable">
                    
                    
                    
                    
                    


                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/ui_controls/" class="devsite-nav-item devsite-nav-item-main
                        
                        
                        parent
                        ">
                <a href="https://developers.devision.io/meta/reference/ui_controls/" class="devsite-nav-title devsite-nav-item-main-title">
                    <span>Элементы UI</span>

                    
                    

                    
                    
                    

                    
                </a>
                
                <ul class="devsite-nav-expandable">
                    
                    
                    


                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/ui_controls/me-chart/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/ui_controls/me-chart/" class="devsite-nav-title">
                    <span>Элемент me-chart</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/ui_controls/me-input/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/ui_controls/me-input/" class="devsite-nav-title">
                    <span>Элемент me-input</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/ui_controls/me-lego/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/ui_controls/me-lego/" class="devsite-nav-title">
                    <span>Элемент me-lego</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/ui_controls/me-lego-list/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/ui_controls/me-lego-list/" class="devsite-nav-title">
                    <span>Элемент me-lego-list</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/ui_controls/me-pivot/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/ui_controls/me-pivot/" class="devsite-nav-title">
                    <span>Элемент me-pivot</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/ui_controls/me-search/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/ui_controls/me-search/" class="devsite-nav-title">
                    <span>Элемент me-search</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/ui_controls/me-submit/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/ui_controls/me-submit/" class="devsite-nav-title">
                    <span>Элемент me-submit</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/ui_controls/me-table/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/ui_controls/me-table/" class="devsite-nav-title">
                    <span>Элемент me-table</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/ui_controls/me-tabs/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/ui_controls/me-tabs/" class="devsite-nav-title">
                    <span>Элемент me-tabs</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/ui_controls/me-wizard/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/ui_controls/me-wizard/" class="devsite-nav-title">
                    <span>Элемент me-wizard</span>
                </a>
            </li>
            
            
            
            
                    
                    
                </ul>
                
            </li>
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/java_api/" class="devsite-nav-item devsite-nav-item-main
                        
                        
                        
                        ">
                <a href="https://developers.devision.io/meta/reference/java_api/" class="devsite-nav-title devsite-nav-item-main-title">
                    <span>Java API</span>

                    
                    

                    
                    
                    

                    
                </a>
                
                <ul class="devsite-nav-expandable">
                    
                    
                    


                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/java_api/apiclientservice/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/java_api/apiclientservice/" class="devsite-nav-title">
                    <span>ApiClientService</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/java_api/billingservice/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/java_api/billingservice/" class="devsite-nav-title">
                    <span>BillingService</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/java_api/cryptservice/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/java_api/cryptservice/" class="devsite-nav-title">
                    <span>CryptService</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/java_api/currentuserservice/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/java_api/currentuserservice/" class="devsite-nav-title">
                    <span>CurrentUserService</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/java_api/datadiffservice/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/java_api/datadiffservice/" class="devsite-nav-title">
                    <span>DataDiffService</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/java_api/datatransformservice/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/java_api/datatransformservice/" class="devsite-nav-title">
                    <span>DataTransformService</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/java_api/entityservice/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/java_api/entityservice/" class="devsite-nav-title">
                    <span>EntityService</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/java_api/gaservice/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/java_api/gaservice/" class="devsite-nav-title">
                    <span>GaService</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/java_api/htmlservice/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/java_api/htmlservice/" class="devsite-nav-title">
                    <span>HtmlService</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/java_api/legotomarkdownservice/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/java_api/legotomarkdownservice/" class="devsite-nav-title">
                    <span>LegoToMarkdownService</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/java_api/linkbuildservice/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/java_api/linkbuildservice/" class="devsite-nav-title">
                    <span>LinkBuildService</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/java_api/markdownservice/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/java_api/markdownservice/" class="devsite-nav-title">
                    <span>MarkdownService</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/java_api/mediaservice/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/java_api/mediaservice/" class="devsite-nav-title">
                    <span>MediaService</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/java_api/metadatabaseservice/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/java_api/metadatabaseservice/" class="devsite-nav-title">
                    <span>MetaDatabaseService</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/java_api/mutatetableservice/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/java_api/mutatetableservice/" class="devsite-nav-title">
                    <span>MutateTableService</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/java_api/objectlogservice/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/java_api/objectlogservice/" class="devsite-nav-title">
                    <span>ObjectLogService</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/java_api/requestenvironmentservice/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/java_api/requestenvironmentservice/" class="devsite-nav-title">
                    <span>RequestEnvironmentService</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/java_api/smartformservice/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/java_api/smartformservice/" class="devsite-nav-title">
                    <span>SmartFormService</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/java_api/smartqueryservice/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/java_api/smartqueryservice/" class="devsite-nav-title">
                    <span>SmartQueryService</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/java_api/starterservice/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/java_api/starterservice/" class="devsite-nav-title">
                    <span>StarterService</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/java_api/tablecolumnservice/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/java_api/tablecolumnservice/" class="devsite-nav-title">
                    <span>TableColumnService</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/java_api/translateservice/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/java_api/translateservice/" class="devsite-nav-title">
                    <span>TranslateService</span>
                </a>
            </li>
            
            
            
            
                    
                    
                    
                    
            
            
            
            
            
            <li data-nav-id="https://developers.devision.io/meta/reference/java_api/userrecoveryservice/" class="devsite-nav-item dd-item ">
                <a href="https://developers.devision.io/meta/reference/java_api/userrecoveryservice/" class="devsite-nav-title">
                    <span>UserRecoveryService</span>
                </a>
            </li>
            
            
            
            
                    
                    
                </ul>
                
            </li>
            
            
            
                    
                    
                </ul>
                
            </li>
            
            
            
                            
                        </ul>
                    </nav>
            
            

    </div>
    <div class="mdl-cell mdl-cell--7-col mdl-cell--9-col-tablet mdl-cell--12-col-phone">
        <section>
        <div id="overlay"></div>
        <div class=" ">
        
          <div>
            <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                <span class="links">
                







 <a href='https://developers.devision.io/meta/'>META</a> > <a href='https://developers.devision.io/meta/guides/'>Руководства</a> > Типы и атрибуты скриптов






                </span>
            </div>
          </div>
        
        
        <div id="body-inner">
          
            <h1>Типы и атрибуты скриптов</h1>
          



<h1 id="мотивация">Мотивация</h1>
<p>Скрипты это блоки получения или изменения данных, имеют атрибуты:</p>
<ul>
<li>type - определяет тип получения данных: sql, js</li>
<li>id - имя данных для меты, используется для последующих обращений к данным. Грубо говоря имя переменной</li>
<li>elem-attrs - доп. атрибуты элемента конкретного типа</li>
</ul>
<h2 id="атрибуты-elem-attrs">Атрибуты elem-attrs</h2>
<p>Конфигурируют элемент, указанный в атрибуте elem. Для каждого elem они могут быть разными - ищите нужную документацию в <a href="https://developers.devision.io/meta/reference/ui_controls/typedoc/">структуре всех классов</a>.</p>
<p>Чаще всего вы будете использовать атрибуты, указывая их в виде json-обекта как в этом примере:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;meta/sql&#34;</span> <span style="color:#a6e22e">db-alias</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;adplatform&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;issues&#34;</span> <span style="color:#a6e22e">order</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;100500&#34;</span> <span style="color:#a6e22e">entity-id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;2701&#34;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">elem-attrs</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;{&#34;addObjectButton&#34;:{ &#34;mode&#34;:&#34;sidenav&#34;}}&#39;</span>&gt;
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><p>(beta) Для атрибутов типа строка и число вы можете использовать inline стиль написания, это удобно для более простой шаблонизации или боее ясного написания сложных объектов</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;meta/sql&#34;</span> <span style="color:#a6e22e">order</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;400&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;res&#34;</span> <span style="color:#a6e22e">entity-id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;2830&#34;</span> <span style="color:#a6e22e">db-alias</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;meta&#34;</span> <span style="color:#a6e22e">entity-id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;ex_system&#34;</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">elem</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;me-card-list&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">elem-attrs</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">entityCardLink</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">mode</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;sidenav&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">elem-attrs</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">entityCardLink</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">drawTopMenu</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;false&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">elem-attrs</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">grid</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">cardMaxWidth</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;350px&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">elem-attrs</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">grid</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">sizeNormal</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;20&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">elem-attrs</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">grid</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">sizeMd</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;25&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">elem-attrs</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">grid</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">sizeSm</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;33&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">elem-attrs</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">grid</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">sizeXs</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;100&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">elem-attrs</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">helpTemplate</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">cssStyle</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">background</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;#3689ff&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">elem-attrs</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">helpTemplate</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">cssStyle</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">color</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;#fff&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">...</span>
</span></span></code></pre></div><h2 id="отображение-элементов-в-сетке">Отображение элементов в сетке</h2>
<p>UI сетка состоит из 12 столбцов, ячейки сетки не используют flex, идут слева направо и естественным образом переносятся на новую строку.
Если нужно сделать новую строку используйте элемент с именем <strong>newrow</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">elem</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;newrow&#34;</span>&gt;&lt;/<span style="color:#f92672">elem</span>&gt;
</span></span></code></pre></div><p>Или если вы описываете LEGO на json, то это выглядит так (<a href="https://developers.devision.io/meta/samples/pages/simple_entity/">полный пример</a>):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;newrow&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="атрибут-order">Атрибут order</h3>
<p>Атрибут <strong>Не влияет</strong> на порядов исполенения скриптов на backend, а только определяет спорядов в сетке.
Чем больше значение, тем правее и ниже будет элемент.</p>
<h3 id="атрибут-span">Атрибут span</h3>
<p>Определяет ширину элемента в сетке. Например если будет span=&ldquo;12&rdquo; (значение по-умолчанию) то элемент будет занимать всю ширину страницы,
span=&ldquo;6&rdquo; - только половину.</p>
<h3 id="атрибут-offset">Атрибут offset</h3>
<p>Работае как и span по ширине в сетке, но отвечает за левый отступ. Например, если у нас span=&ldquo;4&rdquo; и offset=&ldquo;4&rdquo;,
то наш элемент будет занимать 1/3 ширины страницы и на 1/3 будет сдвинут слева, т.е. будет находится примерно по середине.</p>
<h3 id="атрибут-align">Атрибут align</h3>
<p>Центрирует контент элемента. Может быть: left (по умолчанию), right или center.</p>
<h2 id="ключевое-слово-internal">Ключевое слово internal</h2>
<p>Используется для того, чтобы получить данные на серверной стороне и не отправлять их на клиент. Это ускоряет страницу и позволяет 100% защитить программиста от случайно передачи секретной информации на клиент.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;meta/sql&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;my_data&#34;</span> <span style="color:#a6e22e">internal</span>&gt;
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">SELECT</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">script</span>&gt;
</span></span></code></pre></div><h2 id="ключевое-слово-async">Ключевое слово async</h2>
<p>Является ли скрипт асинхронным, по умолчанию равно false.
Если true, то при загрузке страницы скрипт не будет выполнен.
Будет считаться, что эти данные будут загружаться браузером асинхронно.
При этом это может использоваться как для me-input, так и для просто refPvmData.
Это очень удобно для медленных графиков или того, что можно догрузить после всего.</p>
<h2 id="условия-do-if">Условия do-if</h2>
<p>Используется для условной фильтрации скриптов и элементов на бекенде.
Скрипты не будет исполняться и будет предотвращать отрисовку связанных элементов. Элементы, при установки do-if на них не будут приходить на фронтенд</p>
<p>Пример: <a href="https://samples-demo.devision.io/page?p=4551&amp;a=35">https://samples-demo.devision.io/page?p=4551&amp;a=35</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;meta/sql&#34;</span> <span style="color:#a6e22e">db-alias</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;meta&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;all_activity&#34;</span> <span style="color:#a6e22e">do-if</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;env.sp.activity_mode==&#39;all&#39;&#34;</span>&gt;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">select</span> <span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">script</span>&gt;
</span></span></code></pre></div><h2 id="атрибут-exportable-по-умолчанию-true">Атрибут exportable (по умолчанию true)</h2>
<p>Управляет возможностью выгружать таблицу</p>
<h2 id="атрибут-analyzable-по-умолчанию-true">Атрибут analyzable (по умолчанию true)</h2>
<p>Управляет возможностью делать анализ данных на таблице</p>
<h1 id="sql-управляемый-скрипт-metasql">SQL управляемый скрипт (meta/sql)</h1>
<p>Основной способ получения данных, рекомендуется вибирать именно его, а не meta/js в пробладающем кол-во вслучаев.
Исполняется на указанной в db-alias базе данных
Выполняет SQL с синтактисом указанной БД без магических модификаций</p>
<p>Существуют макросы для упрощения жизни разработчика:</p>
<p><strong>${pager}</strong> - для вставки пагинатора</p>
<p><strong>${sort}</strong> - для вставки сортировки</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;meta/sql&#34;</span> <span style="color:#a6e22e">db-alias</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;meta_samples&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;tableWithFooterWithoutPagerTotal&#34;</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">label</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Таблица с футером, но без расширенного пагинатора&#34;</span> <span style="color:#a6e22e">span</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;4&#34;</span> <span style="color:#a6e22e">order</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;71&#34;</span>&gt;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">WITH</span> <span style="color:#a6e22e">empls</span> <span style="color:#a6e22e">AS</span> (
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">SELECT</span> (<span style="color:#a6e22e">generate_series</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">employee</span>.<span style="color:#e6db74">&#34;employeeId&#34;</span><span style="color:#f92672">::</span><span style="color:#a6e22e">text</span>)<span style="color:#f92672">::</span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">as</span> <span style="color:#a6e22e">seq</span>,
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">employee</span>.<span style="color:#f92672">*</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">FROM</span> <span style="color:#e6db74">&#34;public&#34;</span>.<span style="color:#e6db74">&#34;employee&#34;</span>, <span style="color:#a6e22e">generate_series</span>(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">SELECT</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">empls</span>.<span style="color:#a6e22e">seq</span>, <span style="color:#a6e22e">empls</span>.<span style="color:#e6db74">&#34;employeeId&#34;</span>, <span style="color:#a6e22e">empls</span>.<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">empls</span>.<span style="color:#a6e22e">salary</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">json_build_object</span>(
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;footerRows&#39;</span>, <span style="color:#a6e22e">json_build_array</span>(
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">json_build_object</span>(<span style="color:#e6db74">&#39;name&#39;</span>, <span style="color:#e6db74">&#39;Ср. зарплата&#39;</span>, <span style="color:#e6db74">&#39;salary&#39;</span>, (<span style="color:#a6e22e">avg</span>(<span style="color:#a6e22e">empls</span>.<span style="color:#a6e22e">salary</span>) <span style="color:#a6e22e">over</span>())),
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">json_build_object</span>(<span style="color:#e6db74">&#39;name&#39;</span>, <span style="color:#e6db74">&#39;Итого&#39;</span>, <span style="color:#e6db74">&#39;salary&#39;</span>, (<span style="color:#a6e22e">sum</span>(<span style="color:#a6e22e">empls</span>.<span style="color:#a6e22e">salary</span>) <span style="color:#a6e22e">over</span>()))
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>  ) <span style="color:#a6e22e">as</span> <span style="color:#a6e22e">table_props_field</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">FROM</span> <span style="color:#a6e22e">empls</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">order</span> <span style="color:#a6e22e">by</span> <span style="color:#a6e22e">$</span>{<span style="color:#a6e22e">sort</span>}, <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">$</span>{<span style="color:#a6e22e">pager</span>}
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">script</span>&gt;
</span></span></code></pre></div><h3 id="лимит-строк-атрибут-max-rows">Лимит строк (атрибут max-rows)</h3>
<p>По-умолчанию 50 000 строк данных будет нормально возвращаться для скрипта или любого другого запроса в БД.
Если строк придет больше, то скрипт вернет ошибку и не вернет результатов.
Если вам не хватает значения 50к - вы можете увеличить его атрибутом скрипта</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span> <span style="color:#960050;background-color:#1e0010">...</span> <span style="color:#a6e22e">max-rows</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;999999&#34;</span>&gt;
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><h3 id="чтение-и-обновление-данных-атрибут-no-result">Чтение и Обновление данных (атрибут no-result)</h3>
<p>По-умолчанию script выполняет функция query() в сервисе запросов к БД.
Функция query ожидает, что запрос вернет результат, поэтому c SELECT все будет хорошо, а для INSERT, UPDATE, DELETE и пр
нужно делать RETURNING если это Postgres, либо ставить no-result на скрипте. Это будет вызывать функцию update(),
которая ждет, что ничего не будет возвращено и будет ругаться, если что-то вернется</p>
<p>Пример: <a href="https://samples-demo.devision.io/page?p=4105&amp;a=35">https://samples-demo.devision.io/page?p=4105&amp;a=35</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;meta/sql&#34;</span> <span style="color:#a6e22e">db-alias</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;meta_samples&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;upd&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">no-result</span>&gt;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">UPDATE</span> <span style="color:#a6e22e">counters</span> <span style="color:#a6e22e">SET</span> <span style="color:#a6e22e">inc</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">inc</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> <span style="color:#a6e22e">WHERE</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;md_source_update&#39;</span>
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">script</span>&gt;
</span></span></code></pre></div><h1 id="javascript-управляемый-скрипт-metajs">JavaScript управляемый скрипт (meta/js)</h1>
<!-- raw HTML omitted -->
<p>Рекомендуется обрабатывать данные внутри БД, а не затаскивать в код приложения, чтобы, например почистить данные или не дай бог просуммировать.
PostgreSQL очень хорошо справляется почти со всем задачами по обработке данных.</p>
<!-- raw HTML omitted -->
<p>Обрабатывается через <a href="https://ru.wikipedia.org/wiki/Nashorn_(%D0%B4%D0%B2%D0%B8%D0%B6%D0%BE%D0%BA_JavaScript)">Nashorn</a> поэтому работает не всегда так же как обычный JavaScript</p>
<p>В скриптах выглядит следующим образом:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;meta/js&#34;</span> <span style="color:#a6e22e">db-alias</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;meta_samples&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;tbl_with_js_footer&#34;</span> &gt;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">DataResult</span>.<span style="color:#a6e22e">newBuilder</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">field</span>(<span style="color:#e6db74">&#39;id&#39;</span>, <span style="color:#e6db74">&#39;id&#39;</span>, <span style="color:#e6db74">&#39;TEXT&#39;</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">field</span>(<span style="color:#e6db74">&#39;name&#39;</span>, <span style="color:#e6db74">&#39;name&#39;</span>, <span style="color:#e6db74">&#39;TEXT&#39;</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">field</span>(<span style="color:#e6db74">&#39;value&#39;</span>, <span style="color:#e6db74">&#39;value&#39;</span>, <span style="color:#e6db74">&#39;LONG&#39;</span>)
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">headerRow</span>({
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;100%&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">description</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;% - это ...&#34;</span>   
</span></span><span style="display:flex;"><span>      },
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2230</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">description</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Текст описания, возможно достаточно длинный&#34;</span>
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">headerRow</span>({<span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;110%&#39;</span>
</span></span><span style="display:flex;"><span>    }})
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">row</span>({<span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;A&#34;</span>, <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">10</span>})
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">row</span>({<span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2</span>, <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;B&#34;</span>, <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">20</span>})
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">footerRow</span>({<span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Первая строка&#34;</span>, <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2230</span>})
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">footerRow</span>({<span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Вторая строка&#34;</span>, <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">330</span>})
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">footerRow</span>({<span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;N строка&#34;</span>, <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2000</span>})
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">build</span>();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">script</span>&gt;
</span></span></code></pre></div><p>Пример со страницы <a href="http://samples-demo.devision.io/page?a=35&amp;p=3497">http://samples-demo.devision.io/page?a=35&amp;p=3497</a></p>
<h3 id="функции">Функции</h3>
<ul>
<li>json.to(Object) - объект в json</li>
<li>json.from(String) - json в объект</li>
<li>MetaUtils.convert.toDouble(String) - переводит строку в число с плавающей точкой</li>
<li>MetaUtils.convert.toInt(String) - переводит строку в число int</li>
<li>MetaUtils.convert.toLong(String) - переводит строку в число bigint</li>
<li>MetaUtils.meinput.filecontent.readBase64(String) - переводит html base64 строку в строку, пригодную для чтения функиями работы с base64</li>
</ul>
<h2 id="popup-changestate">Popup, ChangeState</h2>
<p>Типичный код после UPDATE/INSERT в карточке объекта. Кидает попап, переводит состояние страницы в default с очисткой параметров env.sp
А так же логирует действие с объектом.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;meta/js&#34;</span> <span style="color:#a6e22e">elem</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;hidden&#34;</span> <span style="color:#a6e22e">states</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;save&#34;</span>&gt;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">main</span>(<span style="color:#a6e22e">pvm</span>, <span style="color:#a6e22e">vm</span>, <span style="color:#a6e22e">env</span>, <span style="color:#a6e22e">ObjectLogService</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">var</span>  <span style="color:#a6e22e">objectId</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">MetaUtils</span>.<span style="color:#a6e22e">convert</span>.<span style="color:#a6e22e">toLong</span>(<span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">object_id</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pvm</span>.<span style="color:#a6e22e">popup</span> <span style="color:#f92672">=</span> {<span style="color:#a6e22e">level</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;success&#34;</span>, <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Объект сохранен&#34;</span>};
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pvm</span>.<span style="color:#a6e22e">setEnvSp</span>({});  
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pvm</span>.<span style="color:#a6e22e">changeState</span>(<span style="color:#e6db74">&#39;default&#39;</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ObjectLogService</span>.<span style="color:#a6e22e">logValue</span>(<span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">entityId</span>, <span style="color:#a6e22e">objectId</span>, <span style="color:#e6db74">&#39;SET&#39;</span>, <span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">sp</span>.<span style="color:#a6e22e">obj</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">script</span>&gt;
</span></span></code></pre></div><h2 id="частичное-изменение-env-sp-с-backend-patchenvsp">Частичное изменение env sp с backend (patchEnvSp)</h2>
<p>Пример: <a href="https://samples-demo.devision.io/page?p=5196&amp;a=35">https://samples-demo.devision.io/page?p=5196&amp;a=35</a></p>
<p>Например, вы хотите реализовать такую логику: &ldquo;Пользователь на форме ввел ИНН в поле, бекенд вернул часть value данных для формы и Мета все заполнила. Поля после этого можно изменять, но если ИНН изменят опять - данные перезаполняются.&rdquo;</p>
<p>Делается через механизм серверной валидации, так как скорее всего мы заходите проверить ввод данных, перед заполнением других полей.
Механизм refPvmValidator позволяет изменять env.sp, если вы вызовите <strong>pvm.patchEnvSp</strong>. Если в refPvmValidator вам нужны данные из БД, используйте additionalPartialLoad, например так:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>refPvmValidator: {id: &#34;my_validator&#34;, sp: {}, additionalPartialLoad: [&#34;my_external_sql_data&#34;, &#34;my_data_loader&#34;]},
</span></span></code></pre></div><!-- raw HTML omitted -->
<p>role=&ldquo;alert&rdquo;&gt;
Обратите внимание, что patchEnvSp перечает частичные данные и мета делает deep merge и перезаписывает только те данные, которые вы передали.</p>
<p><strong>Пример 1:</strong></p>
<ul>
<li>Было: {&ldquo;a&rdquo;: 1, &ldquo;b&rdquo;: {&ldquo;in&rdquo;: 42}}</li>
<li>Передали:  {&ldquo;a&rdquo;: 2}</li>
<li>Будет: {&ldquo;a&rdquo;: 2, &ldquo;b&rdquo;: {&ldquo;in&rdquo;: 42}}</li>
</ul>
<p><strong>Пример 2:</strong></p>
<ul>
<li>Было: {&ldquo;a&rdquo;: 1, &ldquo;b&rdquo;: {&ldquo;in&rdquo;: 42}}</li>
<li>Передали:   {&ldquo;b&rdquo;: {&ldquo;foo&rdquo;: 777}}</li>
<li>Будет: {&ldquo;a&rdquo;: 1, &ldquo;b&rdquo;: {&ldquo;in&rdquo;: 42, &ldquo;foo&rdquo;: 777}}</li>
</ul>
<p><strong>Пример 3:</strong></p>
<ul>
<li>Было: {&ldquo;a&rdquo;: 1, &ldquo;b&rdquo;: {&ldquo;in&rdquo;: 42}}</li>
<li>Передали:   {&ldquo;b&rdquo;: {}}</li>
<li>Будет: {&ldquo;a&rdquo;: 1, &ldquo;b&rdquo;: {&ldquo;in&rdquo;: 42}}</li>
</ul>
<!-- raw HTML omitted -->
<p>Для полной перезаписи env.sp используйте pvm.setEnvSp()</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;my_validator&#34;</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;meta/sql&#34;</span> <span style="color:#a6e22e">db-alias</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;meta_samples&#34;</span> <span style="color:#a6e22e">depends</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;name&#34;</span>&gt;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">SELECT</span> <span style="color:#e6db74">&#39;unique_client&#39;</span> <span style="color:#a6e22e">as</span> <span style="color:#a6e22e">id</span>, <span style="color:#e6db74">&#39;Клиент не может присутствовать в списке больше одного раза: &#39;</span> <span style="color:#a6e22e">as</span> <span style="color:#a6e22e">name</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">LIMIT</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;my_external_sql_data&#34;</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;meta/sql&#34;</span> <span style="color:#a6e22e">db-alias</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;meta_samples&#34;</span> <span style="color:#a6e22e">depends</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;name&#34;</span>&gt;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">SELECT</span> <span style="color:#a6e22e">NOW</span>() <span style="color:#a6e22e">as</span> <span style="color:#a6e22e">my_time</span>
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;meta/js&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;my_data_loader&#34;</span> <span style="color:#a6e22e">depends</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;name&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">main</span>(<span style="color:#a6e22e">pvm</span>, <span style="color:#a6e22e">env</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">pvm</span>.<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">my_validator</span>.<span style="color:#a6e22e">rows</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">===</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">pvm</span>.<span style="color:#a6e22e">patchEnvSp</span>({<span style="color:#a6e22e">obj</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">name_gen</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">sp</span>.<span style="color:#a6e22e">obj</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;11111   &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">pvm</span>.<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">my_external_sql_data</span>.<span style="color:#a6e22e">rows</span>[<span style="color:#ae81ff">0</span>].<span style="color:#a6e22e">my_time</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">other_form_data</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">sp</span>.<span style="color:#a6e22e">obj</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;222222&#34;</span>,
</span></span><span style="display:flex;"><span>    }});
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">elem</span> <span style="color:#a6e22e">states</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;default&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">tpl</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">form</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;editGroupForm&#34;</span> <span style="color:#a6e22e">ng-submit</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;changeState(&#39;save&#39;, {obj:env.sp.obj})&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">me-lego</span> <span style="color:#a6e22e">elems</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;editGroup.legoForm&#34;</span>  <span style="color:#a6e22e">output</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;env.sp.obj&#34;</span> &gt;&lt;/<span style="color:#f92672">me-lego</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">form</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">tpl</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;meta/js&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;editGroup&#34;</span> <span style="color:#a6e22e">states</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;default&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">main</span>(<span style="color:#a6e22e">env</span>, <span style="color:#a6e22e">log</span>, <span style="color:#a6e22e">vm</span>, <span style="color:#a6e22e">pvm</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">vm</span>.<span style="color:#a6e22e">legoForm</span> <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;name&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">label</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Имя сотрудника&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">help</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Это имя будет отображаться на списках&#39;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;me-input&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">refPvmValidator</span><span style="color:#f92672">:</span> {<span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;my_validator&#34;</span>, <span style="color:#a6e22e">sp</span><span style="color:#f92672">:</span> {}, <span style="color:#a6e22e">additionalPartialLoad</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;my_external_sql_data&#34;</span>, <span style="color:#e6db74">&#34;my_data_loader&#34;</span>]},
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">attrs</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;text&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Иван&#39;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">required</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">min</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">max</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;name_gen&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">label</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Поле с генерируемым контентом&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;me-input&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">attrs</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;text&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Иван&#39;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">required</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">min</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">max</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;other_form_data&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">label</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Еще какое-то поле&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;me-input&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">attrs</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;text&#34;</span>
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;me-submit&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">attrs</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Сохранить&#39;</span>
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    ];  
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">elem</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">elem</span> <span style="color:#a6e22e">states</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;save&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">tpl</span>&gt;
</span></span><span style="display:flex;"><span>  Данные формы:
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">pre</span>&gt;
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  {{env.sp|json}}
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">pre</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">tpl</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">elem</span>&gt;
</span></span></code></pre></div><h2 id="заполнение-env-при-первоначальной-загрузке-страницы">Заполнение Env при первоначальной загрузке страницы</h2>
<p>pvm.initEnvSp заполняет env.sp со стороны сервера первый раз при загрузке страницы.</p>
<h3 id="пример-заполнения-на-константами">Пример заполнения на константами</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;meta/js&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;my_init_script&#34;</span> &gt;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">main</span>(<span style="color:#a6e22e">env</span>, <span style="color:#a6e22e">pvm</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">pvm</span>.<span style="color:#a6e22e">initEnvSp</span>(<span style="color:#a6e22e">env</span>, {
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;period&#34;</span><span style="color:#f92672">:</span> {<span style="color:#e6db74">&#34;from&#34;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;${ref.now.withDayOfMonth(1)?date}&#34;</span>, <span style="color:#e6db74">&#34;to&#34;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;${ref.now?date}&#34;</span>}
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">script</span>&gt;
</span></span></code></pre></div><h3 id="пример-заполнения-envsp-из-запроса">Пример заполнения env.sp из запроса</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;meta/sql&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;my_init_info&#34;</span> <span style="color:#a6e22e">internal</span>&gt;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">SELECT</span> ........
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;meta/js&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;my_init_script&#34;</span> &gt;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">main</span>(<span style="color:#a6e22e">env</span>, <span style="color:#a6e22e">pvm</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">init_info</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">pvm</span>.<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">my_init_info</span>.<span style="color:#a6e22e">rows</span>[<span style="color:#ae81ff">0</span>];
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">pvm</span>.<span style="color:#a6e22e">initEnvSp</span>(<span style="color:#a6e22e">env</span>, {
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;period&#34;</span><span style="color:#f92672">:</span> {<span style="color:#e6db74">&#34;from&#34;</span><span style="color:#f92672">:</span><span style="color:#a6e22e">init_info</span>.<span style="color:#a6e22e">start_date</span>, <span style="color:#e6db74">&#34;to&#34;</span><span style="color:#f92672">:</span><span style="color:#a6e22e">init_info</span>.<span style="color:#a6e22e">end_date</span>}
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">script</span>&gt;
</span></span></code></pre></div>







</section>
</div>
<div class="mdl-cell mdl-cell--2-col mdl-cell--12-col-tablet mdl-cell--12-col-phone">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#атрибуты-elem-attrs">Атрибуты elem-attrs</a></li>
    <li><a href="#отображение-элементов-в-сетке">Отображение элементов в сетке</a>
      <ul>
        <li><a href="#атрибут-order">Атрибут order</a></li>
        <li><a href="#атрибут-span">Атрибут span</a></li>
        <li><a href="#атрибут-offset">Атрибут offset</a></li>
        <li><a href="#атрибут-align">Атрибут align</a></li>
      </ul>
    </li>
    <li><a href="#ключевое-слово-internal">Ключевое слово internal</a></li>
    <li><a href="#ключевое-слово-async">Ключевое слово async</a></li>
    <li><a href="#условия-do-if">Условия do-if</a></li>
    <li><a href="#атрибут-exportable-по-умолчанию-true">Атрибут exportable (по умолчанию true)</a></li>
    <li><a href="#атрибут-analyzable-по-умолчанию-true">Атрибут analyzable (по умолчанию true)</a></li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#лимит-строк-атрибут-max-rows">Лимит строк (атрибут max-rows)</a></li>
        <li><a href="#чтение-и-обновление-данных-атрибут-no-result">Чтение и Обновление данных (атрибут no-result)</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#функции">Функции</a></li>
      </ul>
    </li>
    <li><a href="#popup-changestate">Popup, ChangeState</a></li>
    <li><a href="#частичное-изменение-env-sp-с-backend-patchenvsp">Частичное изменение env sp с backend (patchEnvSp)</a></li>
    <li><a href="#заполнение-env-при-первоначальной-загрузке-страницы">Заполнение Env при первоначальной загрузке страницы</a>
      <ul>
        <li><a href="#пример-заполнения-на-константами">Пример заполнения на константами</a></li>
        <li><a href="#пример-заполнения-envsp-из-запроса">Пример заполнения env.sp из запроса</a></li>
      </ul>
    </li>
  </ul>
</nav>
</div>

</div>
</main>


</div>
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="https://developers.devision.io/meta/js/clipboard.min.js"></script>
    <script src="https://developers.devision.io/meta/js/html5shiv-printshiv.min.js"></script>
    <script src="https://developers.devision.io/meta/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="https://developers.devision.io/meta/js/modernizr.custom.71422.js"></script>
    <script src="https://developers.devision.io/meta/js/learn.js"></script>
    <script src="https://developers.devision.io/meta/js/hugo-learn.js"></script>

  </body>
</html>

